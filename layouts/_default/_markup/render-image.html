{{ $img := .Page.Resources.GetMatch (printf "*%s*" .Destination) }}
{{ if $img }}
  {{ $placeholder := $img.Resize "400x" | images.Filter (images.GaussianBlur 6) }}
  {{ $full := $img }}
  <figure class="image-wrapper">
    <div class="progressive-container">
      <img src="{{ $placeholder.RelPermalink }}" width="{{ $placeholder.Width }}" height="{{ $placeholder.Height }}" alt="{{ .Text }}" class="placeholder" />
      <img src="{{ $full.RelPermalink }}" width="{{ $full.Width }}" height="{{ $full.Height }}" alt="{{ .Text }}" class="fullres clickable-image" loading="lazy" />
    {{ with .Title }}<figcaption>{{ . }}</figcaption>{{ end }}
    </div>
  </figure>
{{ else }}
  <!-- Fallback if image is not a Page Resource -->
  <img src="{{ .Destination | safeURL }}" alt="{{ .Text }}" class="clickable-image" loading="lazy" />
{{ end }}